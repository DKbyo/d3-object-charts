describe('CalendarGridChart data', () => {

  var chart, data;

  beforeEach((done) => {
    data = global.initData();
    chart = global.initCalendarGrid(chart, data.raw, done);
  });

  it('should exist in the amount as specified by data', () => {
    let gridUnit = d3.select('#grid-chart svg').select('g').selectAll('.d3-chart-grid-unit');
    expect(gridUnit.size()).toBe(data.raw.length);
  });

  it('should set correct dimensions for each grid unit', () => {
    let gridUnit = d3.select('#grid-chart svg').select('g').selectAll('.d3-chart-grid-unit');
    expect(gridUnit.size()).toBe(data.raw.length);
  });

  it('should set correct opacity depending on value', () => {

    let opacities = ["0.6347888135461286",
    "0.740719363277925",
    "0.9298617259415959",
    "0.742156225913307",
    "0.959031365221197",
    "0.7159039335516424",
    "0.0029206256737874803",
    "0.20880437637743754",
    "0.8504054690123548",
    "0.48929470966311506",
    "0.9283938971225802",
    "0.613506525730865",
    "0.12790908549785973",
    "0.434108710012997",
    "0.14242685753181272",
    "0.7613702854061543",
    "0.9959195522721768",
    "0.8391898714096503",
    "0.4481017356537963",
    "0.022924184184948904",
    "0.9536886503637756",
    "0.49092671893727113",
    "0.8444955804549472",
    "0.7831661899272586",
    "0.5315990406649889",
    "0.4479482880998271",
    "0.47071799224360955",
    "0.6787685517793871",
    "0.859965562635633",
    "0.039165103334733775",
    "0.5832978344809336",
    "0.3416010873881583",
    "0.08969120648352336",
    "0.6190875799985391",
    "0.6748825611163112",
    "0.8471920941016178",
    "0.7299162583644357",
    "0.32206379381801065",
    "0.4218273460048788",
    "0.31207512712641494",
    "0.4295681065390522",
    "0.1477594660541366",
    "0.657893283627963",
    "0.7134969974293215",
    "0.559431281335641",
    "0.9197512950928677",
    "0.7292669220597141",
    "0.24136756005219828",
    "0.11739984967642247",
    "0.018312346121286627",
    "0.48549195391112443",
    "0.9070393349692621",
    "0.15736294709427945",
    "0.9429000925577926",
    "0.9657702859540658",
    "0.17987568677064114",
    "0.1090249745283206",
    "0.9432060875186574",
    "0.3831146992660439",
    "0.26676710676202353",
    "0.34277244130294593",
    "0.6664753193215645",
    "0.9564657867851369",
    "0.9119534664522325",
    "0.9198931285712468",
    "0.8489633865545598",
    "0.6487616445524664",
    "0.917118428613549",
    "0.6430400565503919",
    "0.6870211165452782",
    "0.24585873132772085",
    "0.5691768870024358",
    "0.19545526133050628",
    "0.0498487179989201",
    "0.2069558551469669",
    "0.5260662713356885",
    "0.36832625607550906",
    "0.6925213665097729",
    "0.9575672269349136",
    "0.8500715819064182",
    "0.37887876711749346",
    "0.2837505029615691",
    "0.0061334698186467085",
    "0.9213276978576836",
    "0.7922498190507629",
    "0.09558031178570559",
    "0.8966566071713845",
    "0.0806173384396427",
    "0.7914874150917828",
    "0.0699697594056452",
    "0.856154154884527",
    "0.6900029283285717",
    "0.01966016797893999",
    "0.022051171755713472",
    "0.4830241799797653",
    "0.4586312129557565",
    "0.19267704534165564",
    "0.40054964512173596",
    "0.28355676264156404",
    "0.7750714938123993",
    "0.8018553271199909",
    "0.1634478696366074",
    "0.6094647267065461",
    "0.6185167415311548",
    "0.1317047330626947",
    "0.023007815179484914",
    "0.9447736473866569",
    "0.2973443617438335",
    "0.3547417660371025",
    "0.5610096033836003",
    "0.9585812502256867",
    "0.5855578854798236",
    "0.3640355341787024",
    "0.6774636915078986",
    "0.7476401586918582",
    "0.746046731599799",
    "0.7693515419090259",
    "0.7434774291360727",
    "0.5686976962961077",
    "0.8359767810887374",
    "0.7493884701065954",
    "0.443992486030385",
    "0.3200729352797683",
    "0.6275493583385792",
    "0.4875854444407147",
    "0.5710626379692053",
    "0.6776920843281239",
    "0.6599513782103357",
    "0.625095156179724",
    "0.7767669445996968",
    "0.14964482866705542",
    "0.9566911182152372",
    "0.008987001860331079",
    "0.44869498855627077",
    "0.2415635602262145",
    "0.6119398861537455",
    "0.10469376030125566",
    "0.9416035174807573",
    "0.48909142773728487",
    "0.2394530296759504",
    "0.45892880115663826",
    "0.06144225276196724",
    "0.8320414980627331",
    "0.17055083064564747",
    "0.12783133790019907",
    "0.03484765013826152",
    "0",
    "0.622321749173326",
    "0.03403999124417123",
    "0.4210218235254275",
    "0.6834282313834503",
    "0.9324470809110176",
    "0.9888411357886472",
    "0.9733014009934025",
    "0.4920668614292927",
    "0.9442955711481339",
    "0.7364448163892647",
    "0.3235104247941558",
    "0.4268768619031593",
    "0.9871026688395231",
    "0.6058082644122286",
    "0.7089265569960577",
    "0.7897371750246898",
    "0.1861213175380244",
    "0.26697359342692717",
    "0.31058883533760473",
    "0.5943116721863492",
    "0.036853113404665794",
    "0.17761530784932",
    "0.4161967140817612",
    "0.1537173104563352",
    "0.0555278393434705",
    "0.6550613687014002",
    "0.5416516025738325",
    "0.13417921722391624",
    "0.7876025388965121",
    "0.9105046412065624",
    "0.7664265291015703",
    "0.25175933101380554",
    "0.717727948670373",
    "0.9282180140527935",
    "0.8835396286476908",
    "0.05846431374258554",
    "0.6275207344580253",
    "0.5442899758076913",
    "0.09695021359756917",
    "0.900118797442898",
    "0.18085984733676153",
    "0.4193541714253092",
    "0.7272328763715205",
    "0.37933058707541545",
    "0.4460947946283791",
    "0.2572803237116823",
    "0.8843081321981204",
    "0.43151269194303576",
    "0.3118816193971058",
    "0.1564834865388962",
    "0.9445421814647912",
    "0.6738869609761804",
    "0.6067822167530674",
    "0.8324854998814359",
    "0.9874699281428168",
    "0.6841008377665768",
    "0.24338242110701847",
    "0.09770715858499202",
    "0.912380943556939",
    "0.8911751586394796",
    "0.21480363269808367",
    "0.7630726307625665",
    "0.07670001713057406",
    "0.950166245804304",
    "0.9249342067911437",
    "0.9927026709337295",
    "0.9180924741780503",
    "0.7150836433197347",
    "0.2776564086630724",
    "0.1489977873508912",
    "0.28234201428300254",
    "0.4520314835833932",
    "0.7003798907816492",
    "0.2587597804258759",
    "0.21536304072643975",
    "0.514912110000459",
    "0.667624666361998",
    "0.7368931151629672",
    "0.5402403307707466",
    "0.4398221784214461",
    "0.8361658482798683",
    "0.6915267281192865",
    "0.7493058460681533",
    "0.09030123261835088",
    "0.32226873409442114",
    "0.9653153687687818",
    "0.0762805399278057",
    "0.3797298441126188",
    "0.489799413203047",
    "0.9697256895977542",
    "0.9384319034916265",
    "0.3273374224460991",
    "0.43519496337229646",
    "0.696311249666729",
    "0.8241010686052299",
    "0.11244476864563269",
    "0.13083039043954037",
    "0.26966864430532445",
    "0.9530782318931823",
    "0.06003884617839239",
    "0.7971198550386476",
    "0.8727200737396735",
    "0.5129145316289117",
    "0.8109015196818345",
    "0.6553299088306404",
    "0.1001525155047277",
    "0.14613007125867794",
    "0.11553410268064379",
    "0.37730425599664463",
    "0.09720330904876284",
    "0.9065123177132727",
    "0.6832000079117376",
    "0.20711037711535862",
    "0.5195729239819036",
    "0.5236064378117694",
    "0.4267033759463442",
    "0.10877191233783068",
    "0.8279156871853974",
    "0.4555034845913555",
    "0.577436688782152",
    "0.6576632266013996",
    "0.7305648961943789",
    "0.19782596975378597",
    "0.36512075692464685",
    "0.8039557827220187",
    "0.583451151334391",
    "0.9853822434798698",
    "0.2653166639218466",
    "0.03140221881105232",
    "0.7238183084008396",
    "0.2970988874441699",
    "0.6111206070940773",
    "0.30268150941529526",
    "0.4684344570798131",
    "0.30344935665240214",
    "0.9802168901539391",
    "0.70387238085157",
    "0.7309505205591984",
    "0.1630938537149259",
    "0.5941358607910366",
    "0.8262245923791373",
    "0.907130116078179",
    "0.8823888973061372",
    "0.8087917417135498",
    "0.1474799927568119",
    "0.5781054931389198",
    "0.45835583049076034",
    "0.37880689167365345",
    "0.14814323508068672",
    "0.003391350125634518",
    "0.6835835127265004",
    "0.8772051749367653",
    "0.2859900318720272",
    "0.10240610385519078",
    "0.3703343014968282",
    "0.6617463180867089",
    "0.576187573684346",
    "0.09205999140751409",
    "0.48860428467777106",
    "0.3186653509644207",
    "0.8227465536165266",
    "0.09971395227954538",
    "0.8646563119531259",
    "0.2732961255178683",
    "0.07054992422120177",
    "0.43155323252473754",
    "0.41695865613857397",
    "0.23255940825696486",
    "0.46353755487560533",
    "0.5959414839117558",
    "0.34699475389600964",
    "0.5770118936144717",
    "0.08806141419923219",
    "0.1952606705202531",
    "0.8564225875020556",
    "0.7351766705473975",
    "0.3644156974638919",
    "0.8377199312386387",
    "0.5768713676096715",
    "0.03904704095338829",
    "0.8285856294330012",
    "0.7969986933218671",
    "0.2950851823159194",
    "0.8746140939732352",
    "0.7194933687352644",
    "0.1263935334247488",
    "0.09304933759842238",
    "0.7505983106375143",
    "0.28706239607675554",
    "0.6709703055061129",
    "0.39131834198712356",
    "0.7435359087143703",
    "0.43938837124266705",
    "0.7817510954855469",
    "0.32387463933767624",
    "0.41443603624368475",
    "0.7001911236395427",
    "0.24352249106540902",
    "0.15141878876897497",
    "0.9660559942279581",
    "0.25379789125695495",
    "0.9821529622231495",
    "0.4533390384403444",
    "0.9359212843865656",
    "0.4498770107246647",
    "0.5435264049133168",
    "0.4776628766051043",
    "0.28917582592977165",
    "0.6781331737271775",
    "0.5650994924666768",
    "0.9897584397637361",
    "0.2785592343943657",
    "0.02618435948236797",
    "0.5464381089889045",
    "0.810077480593848",
    "0.3172579165564703",
    "0.20163399240848145"];

    d3.select('#grid-chart svg').select('g').selectAll('.d3-chart-grid-unit').each(function(d, i) {
      expect(d3.select(this).attr('opacity')).toBe(data.opacities[i]);
    })
  });

});
