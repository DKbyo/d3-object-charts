!function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var n=a(1),i=(r(n),a(5));r(i);a(6)},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),c=a(2),u=r(c),l="cardinal",f=function(t){function e(){return n(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),s(e,[{key:"afterAxes",value:function(){var t=this;t.fnArea=d3.svg.area().x(function(e,a){return t.x_scale(e.x)}).y0(function(e){return t.y_scale(e.y0)}).y1(function(e){return t.y_scale(e.y0+e.y)}).interpolate(t.interpolation),t.fnStack=d3.layout.stack().values(function(t){return t.values}),t.fnColor=d3.scale.category20()}},{key:"serializeData",value:function(t){var e=this,a={series:[]};return t.series.forEach(function(t,r){t.css_class=t.css_class||e.toClass?e.toClass(t):"",t.title=t.title||e.toClass?e.titleize(t):"","x"!==e.domain_attr&&"y"!==e.range_attr&&(t.values=t.values.map(function(a){return{x:a[e.domain_attr],y:a[e.range_attr],series:t}})),a.series.push(t)}),a.series=e.fnStack(a.series),a.domain_extent=d3.extent(a.series[0].values.map(function(t){return t.x})),a.range_max=d3.max(a.series[a.series.length-1].values.map(function(t){return t.y0+t.y})),a}},{key:"drawData",value:function(t){var e=this;t=e.serializeData(t),e.y_scale.domain([0,t.range_max]),e.svg.select(".d3-chart-range.d3-chart-axis").call(e.y_axis),e.x_scale.domain(t.domain_extent),e.svg.select(".d3-chart-domain.d3-chart-axis").call(e.x_axis);var a=e.svg.selectAll(".d3-chart-spline-stack").data(t.series);[a.enter().append("path"),a.transition()].forEach(function(t){e.applyData(t)}),a.exit().remove()}},{key:"applyData",value:function(t){var e=this;t.attr("class",function(t){"d3-chart-spline-stack "+t.css_class}).attr("d",function(t){return e.fnArea(t.values)}).style("fill",function(t){return e.fnColor(t.title)})}},{key:"chart_options",get:function(){return Object.assign(u["default"].DEFAULTS,{interpolation:l})}}]),e}(u["default"]);e["default"]=f},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),c=a(3),u=r(c),l=a(4),f=r(l),d=function(t){function e(){return n(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),s(e,[{key:"defineAxes",value:function(){var t=this;t.y_scale=d3.scale.linear().range([t.height,0]),t.y_axis=d3.svg.axis().scale(t.y_scale).orient("left").outerTickSize(1),t.time_series?t.x_scale=d3.time.scale().range([0,t.width]):t.x_scale=d3.scale.linear().range([0,t.width]),t.x_axis=d3.svg.axis().scale(t.x_scale).orient("bottom").outerTickSize(0),t.svg.append("g").attr("class","d3-chart-range d3-chart-axis"),t.svg.append("g").attr("class","d3-chart-domain d3-chart-axis").attr("transform","translate(0, "+t.height+")")}},{key:"afterAxes",value:function(){var t=this;t.line=d3.svg.line().interpolate(t.chart_options.interpolation).x(function(e){return t.x_scale(e[t.domain_attr])}).y(function(e){return t.y_scale(e[t.range_attr])}),t.color=d3.scale.category20()}},{key:"serializeData",value:function(t){var e=this,a={series:[],range_min:1/0,range_max:-(1/0),domain_min:1/0,domain_max:-(1/0)};return t.forEach(function(t){var r=(0,u["default"])({css_class:e.toClass?e.toClass(t):"",title:e.titleize?e.titleize(t):"",color:""},t);r.values.forEach(function(t){series_data.range_min=Math.min(series_data.range_min,t[e.range_attr]),series_data.range_max=Math.max(series_data.range_max,t[e.range_attr]),series_data.domain_min=Math.min(series_data.domain_min,t[e.domain_attr]),series_data.domain_max=Math.max(series_data.domain_max,t[e.domain_attr])}),a.series.push(r)}),a}},{key:"drawData",value:function(t){var e=this;t=e.serialize_data,bar_chart.y_scale.domain([Math.min(0,t.range_min),t.range_max]),bar_chart.svg.select(".d3-chart-range.d3-chart-axis").call(bar_chart.y_axis),bar_chart.x_scale.domain([t.domain_max,Math.min(t.domain_min)]),bar_chart.svg.select(".d3-chart-domain.d3-chart-axis").call(bar_chart.x_axis);var a=g.selectAll(".d3-chart-series").data(t.series);[a.enter().append("g"),a.transition()].forEach(function(t){e.applyData(t)}),a.exit().remove()}},{key:"applyData",value:function(t){var e=this;t.attr("class",function(t){return"d3-chart-line "+t.css_class}).attr("title",function(t){return t.title}).append("path").attr("d",function(t){return e.line(t.values)}).style("stroke",function(t){return e.color(t.title)})}},{key:"chart_options",get:function(){return{interpolation:"basis"}}}]),e}(f["default"]);e["default"]=d},function(t,e){"use strict";var a=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},i=function(t){if(!t||"[object Object]"!==r.call(t))return!1;var e=a.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&a.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var i;for(i in t);return"undefined"==typeof i||a.call(t,i)};t.exports=function o(){var t,e,a,r,s,c,u=arguments[0],l=1,f=arguments.length,d=!1;for("boolean"==typeof u?(d=u,u=arguments[1]||{},l=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});f>l;++l)if(t=arguments[l],null!=t)for(e in t)a=u[e],r=t[e],u!==r&&(d&&r&&(i(r)||(s=n(r)))?(s?(s=!1,c=a&&n(a)?a:[]):c=a&&i(a)?a:{},u[e]=o(d,c,r)):"undefined"!=typeof r&&(u[e]=r));return u}},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),o=r(i),s={outer_width:500,outer_height:300,margin:{top:0,left:70,bottom:50,right:20},domain_ticks:10,range_ticks:8,container:"container",time_series:!1,range_label:void 0,domain_attr:void 0,range_attr:void 0,titleize:function(t,e){var a=e?e.name:t.title;if(!a)return"";for(var r=a.split(" "),n=[],i=0;i<r.length;++i)n.push(r[i].charAt(0).toUpperCase()+r[i].toLowerCase().slice(1));return n.join(" ")},toClass:function(t){return t?t.title.toLowerCase().replace(/\s+/g,"-"):""}},c=function u(t){n(this,u);var e=this;e=(0,o["default"])(e,e.chart_options,t),e.height=e.outer_height-e.margin.top-e.margin.bottom,e.width=e.outer_width-e.margin.left-e.margin.right,e.svg=d3.select(e.container).append("svg").attr("width",e.outer_width).attr("height",e.outer_height).append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.defineAxes(),e.afterAxes&&e.afterAxes()};c.DEFAULTS=s,e["default"]=c},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),c=a(4),u=r(c),l=a(3),f=r(l),d=function(t){function e(){return n(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),s(e,[{key:"defineAxes",value:function(){var t=this;t.y_axis=d3.svg.axis().orient("left").outerTickSize(0),t.y_scale=d3.scale.ordinal(),t.svg.append("g").attr("class","d3-chart-range d3-chart-axis"),t.x_scale=d3.scale.ordinal().domain(d3.range(31).map(function(t){return t+1})).rangeRoundBands([0,t.width],t.grid_padding,0),t.x_axis=d3.svg.axis().scale(t.x_scale).orient("top").outerTickSize(0),t.svg.append("g").attr("class","d3-chart-domain d3-chart-axis")}},{key:"afterAxes",value:function(){var t=this;t.grid_unit_size=t.width/31-t.grid_padding*t.width/30,t.display_date_format&&(t.displayDate=d3.time.format(t.display_date_format)),!t.toDate&&t.parse_date_format?(t.parseDate=d3.time.format(t.parse_date_format),t.toDate=function(e){t.parseDate(e[t.date_attr])}):t.toDate||(t.toDate=function(e){return e[t.date_attr]}),t.monthFormat=d3.time.format("%B %Y"),t.toMonthString=function(e){return t.monthFormat(t.toDate(e))}}},{key:"serializeData",value:function(t){var e=this;if(t.css_class=t.css_class||e.toClass?e.toClass(t):"",e.rangeValue=e.range_attr?function(t){return t[e.range_attr]}:e.rangeValue,t.months=[],void 0!==t.min_range&&void 0!==t.max_range)t.range={min:t.min_range,max:t.max_range},t.values.forEach(function(a){var r=e.toDate(a),n=e.monthFormat(r);t.months.indexOf(n)<0&&t.months.push(n)});else{var a=1/0,r=-(1/0);t.values.forEach(function(n){var i=e.toDate(n),o=e.monthFormat(i),s=e.rangeValue(n);a=Math.min(a,s),r=Math.max(r,s),t.months.indexOf(o)<0&&t.months.push(o)}),e.min_range_zero&&(a=Math.min(a,0)),t.range={min:a,max:r}}return t.range.diff=t.range.max-t.range.min,t.months=t.months.sort(function(t,a){var r=e.monthFormat.parse(t),n=e.monthFormat.parse(a);return r.getTime()-n.getTime()}),t}},{key:"drawData",value:function(t){var e=this;t=e.serializeData(t);var a=e.grid_unit_size*(1+e.grid_padding)*t.months.length;e.y_scale.rangeRoundBands([0,a],e.grid_padding,0),e.y_scale.domain(t.months),e.y_axis.scale(e.y_scale),e.svg.select(".d3-chart-range").call(e.y_axis),e.svg.select(".d3-chart-domain").call(e.x_axis);var r=e.svg.selectAll(".d3-chart-grid-unit").data(t.values);e.applyData(t,r.enter().append("rect")),e.applyData(t,r.transition()),r.exit().remove()}},{key:"applyData",value:function(t,e){var a=this,r="d3-chart-grid-unit "+t.css_class;e.attr("class",function(t){return r}).attr("y",function(t){var e=a.y_scale(a.toMonthString(t)),r=a.y_scale.rangeBand()/2-a.grid_unit_size/2;return e+r}).attr("height",a.grid_unit_size).attr("x",function(t){return a.x_scale(a.toDate(t).getDate())}).attr("width",function(t){return a.grid_unit_size}).attr("fill",a.color).attr("opacity",function(e){return a.applyOpacity(a.rangeValue(e),t.range)})}},{key:"applyOpacity",value:function(t,e){return Math.max(0,Math.min(1,1-(e.max-(t-e.min))/e.diff))}},{key:"chart_options",get:function(){return(0,f["default"])(u["default"].DEFAULTS,{margin:{top:30,left:150,bottom:0,right:0},grid_padding:.05,parse_date_format:"%Y-%m-%d",display_date_format:"%B %Y",date_attr:"date",range_attr:void 0,min_range_zero:!1,color:"#FFF",extent:[]})}}]),e}(u["default"]);e["default"]=d},function(t,e){}]);
//# sourceMappingURL=bundle.min.js.map