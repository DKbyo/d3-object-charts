!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=(r(n),a(3));r(i);a(4)},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),c=r(l),d=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),o(t,[{key:"defineAxes",value:function(){var e=this;e.y_axis=d3.svg.axis().orient("left").outerTickSize(0),e.y_scale=d3.scale.ordinal(),e.svg.append("g").attr("class","d3-chart-range d3-chart-axis"),e.x_scale=d3.scale.ordinal().domain(d3.range(31).map(function(e){return e+1})).rangeRoundBands([0,e.width],e.grid_padding,0),e.x_axis=d3.svg.axis().scale(e.x_scale).orient("top").outerTickSize(0),e.svg.append("g").attr("class","d3-chart-domain d3-chart-axis")}},{key:"afterAxes",value:function(){var e=this;e.grid_unit_size=e.width/31-e.grid_padding*e.width/30,e.display_date_format&&(e.displayDate=d3.time.format(e.display_date_format)),!e.toDate&&e.parse_date_format?(e.parseDate=d3.time.format(e.parse_date_format),e.toDate=function(t){e.parseDate(t[e.date_attr])}):e.toDate||(e.toDate=function(t){return t[e.date_attr]}),e.monthFormat=d3.time.format(e.display_date_format),e.toMonthString=function(t){return e.monthFormat(e.toDate(t))}}},{key:"serializeData",value:function(e){var t=this;if(e.css_class=e.css_class||t.toClass?t.toClass(e):"",t.rangeValue=t.range_attr?function(e){return e[t.range_attr]}:t.rangeValue,e.months=[],void 0!==e.min_range&&void 0!==e.max_range)e.range={min:e.min_range,max:e.max_range},e.values.forEach(function(a){var r=t.toDate(a),n=t.monthFormat(r);e.months.indexOf(n)<0&&e.months.push(n)});else{var a=1/0,r=-(1/0);e.values.forEach(function(n){var i=t.toDate(n),s=t.monthFormat(i),o=t.rangeValue(n);a=Math.min(a,o),r=Math.max(r,o),e.months.indexOf(s)<0&&e.months.push(s)}),t.min_range_zero&&(a=Math.min(a,0)),e.range={min:a,max:r}}return e.range.diff=e.range.max-e.range.min,e.months=e.months.sort(function(e,a){var r=t.monthFormat.parse(e),n=t.monthFormat.parse(a);return r.getTime()-n.getTime()}),e}},{key:"drawLegend",value:function(e){var t=this,a=[t.color_max,t.color_min];t.gridSize=Math.floor(t.outer_width/31),t.legendElementWidth=3.5*t.gridSize;var r=t.svg.append("g").attr("class","color-legend"),n=t.svg.append("g").attr("class","legend").selectAll().data([e.range.min,e.range.max],function(e){return e});n.enter().append("text").attr("class","legend-description");var i=r.append("defs").append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("spreadMethod","pad");i.append("stop").attr("offset","0%").attr("stop-color",a[1]).attr("stop-opacity",1),i.append("stop").attr("offset","100%").attr("stop-color",a[0]).attr("stop-opacity",1),r.append("rect").attr("x",0).attr("y",t.gridSize*e.months.length-40).attr("width",120).attr("height",30).style("fill","url(#gradient)"),n.text(function(e){return Math.round(e)}).attr("x",function(e,a){return t.legendElementWidth*a}).attr("y",t.gridSize*e.months.length+5),n.exit().remove()}},{key:"drawData",value:function(e){var t=this;e=t.serializeData(e),t.legend&&t.drawLegend(e);var a=t.grid_unit_size*(1+t.grid_padding)*e.months.length;t.y_scale.rangeRoundBands([0,a],t.grid_padding,0),t.y_scale.domain(e.months),t.y_axis.scale(t.y_scale),t.svg.select(".d3-chart-range").call(t.y_axis),t.svg.select(".d3-chart-domain").call(t.x_axis);var r=t.svg.selectAll(".d3-chart-grid-unit").data(e.values);t.applyData(e,r.enter().append("rect")),t.applyData(e,r.transition()),r.exit().remove()}},{key:"applyData",value:function(e,t){var a=this,r="d3-chart-grid-unit "+e.css_class;t.attr("class",function(e){return r}).attr("y",function(e){var t=a.y_scale(a.toMonthString(e)),r=a.y_scale.rangeBand()/2-a.grid_unit_size/2;return t+r}).attr("height",a.grid_unit_size).attr("x",function(e){return a.x_scale(a.toDate(e).getDate())}).attr("width",function(e){return a.grid_unit_size}).attr("fill",a.color_max).attr("opacity",function(t){return a.applyOpacity(a.rangeValue(t),e.range)})}},{key:"applyOpacity",value:function(e,t){return Math.max(0,Math.min(1,1-(t.max-(e-t.min))/t.diff))}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},c["default"].DEFAULTS),{outer_width:800,outer_height:360,margin:{top:30,left:150,bottom:30,right:0},grid_padding:.05,display_date_format:"%B %Y",date_attr:"date",range_attr:"value",min_range_zero:!1,color_max:"#000",color_min:"#fff",legend:!0,chart_class:"d3-calendar-grid"})}}]),t}(c["default"]);t["default"]=d},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r={outer_width:500,outer_height:300,margin:{top:0,left:70,bottom:50,right:20},domain_ticks:10,range_ticks:8,container:"container",time_series:!1,range_label:void 0,domain_attr:void 0,range_attr:void 0,titleize:function(e,t){var a=t?t.name:e.title;if(!a)return"";for(var r=a.split(" "),n=[],i=0;i<r.length;++i)n.push(r[i].charAt(0).toUpperCase()+r[i].toLowerCase().slice(1));return n.join(" ")},toClass:function(e){return e.css_class?e.css_class.toLowerCase().replace(/\s+/g,"-"):""}},n=function i(e){a(this,i);var t=this;Object.assign(t,t.chart_options,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,t.svg=d3.select(t.container).append("svg").attr("width",t.outer_width).attr("height",t.outer_height).append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.chart_class&&t.svg.attr("class",t.chart_class),t.defineAxes(),t.afterAxes&&t.afterAxes()};n.DEFAULTS=r,t["default"]=n},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_base=__webpack_require__(2),_base2=_interopRequireDefault(_base),RangeSlider=function(_Chart){function RangeSlider(){return _classCallCheck(this,RangeSlider),_possibleConstructorReturn(this,Object.getPrototypeOf(RangeSlider).apply(this,arguments))}return _inherits(RangeSlider,_Chart),_createClass(RangeSlider,[{key:"defineAxes",value:function(){var e=this;e.date_range?e.x_scale=d3.time.scale().range([0,e.width]).clamp(!0):e.x_scale=d3.scale.linear().range([0,e.width]).clamp(!0),e.x_axis=d3.svg.axis().scale(e.x_scale).orient("bottom").tickSize(1).ticks(e.tick_amount).outerTickSize(1).tickPadding(12),e.svg.append("g").attr("class","d3-chart-domain d3-slider-axis").attr("transform","translate(0,"+e.height/2+")")}},{key:"afterAxes",value:function(){var e=this;e.slider=e.svg.append("g").attr("class","d3-chart-slider"),e.min_handle=e.slider.append("circle").attr("class","d3-chart-min-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",9),e.max_handle=e.slider.append("circle").attr("class","d3-chart-max-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",9),e.brush=d3.svg.brush().x(e.x_scale),e.slider.call(e.brush),e.slider.call(e.brush).selectAll(".extent,.resize").remove()}},{key:"drawData",value:function drawData(data){var range_slider=this;range_slider.x_scale.domain([data.abs_min,data.abs_max]),range_slider.svg.select(".d3-chart-domain").call(range_slider.x_axis),range_slider.min_handle.attr("cx",range_slider.x_scale(data.current_min)),range_slider.max_handle.attr("cx",range_slider.x_scale(data.current_max)),range_slider.brush.extent([data.current_min,data.current_min]).on("brush",function(){RangeSlider.handleBrush(range_slider,eval("this"))}),range_slider.slider.call(range_slider.brush.event).transition().duration(750).call(range_slider.brush.extent([data.current_min,data.current_min])).call(range_slider.brush.event)}},{key:"getDelta",value:function(e,t,a){var r=this;if("max"===e){if(r.date_range){if(Math.abs(t.getTime()-a.getTime())>r.delta.max)return t>a?new Date(t.getTime()-r.delta.max):new Date(t.getTime()+r.delta.max)}else if(Math.abs(t-a)>r.delta.max)return t>a?t-r.delta.max:t+r.delta.max;return!1}if("min"===e){if(r.date_range){if(Math.abs(t.getTime()-a.getTime())<=r.delta.min)return a>t?new Date(t.getTime()+r.delta.min):new Date(t.getTime()-r.delta.min)}else if(Math.abs(t-a)<=r.delta.min)return a>t?t+r.delta.min:t-r.delta.min;return!1}}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},_base2["default"].DEFAULTS),{outer_width:600,outer_height:100,margin:{top:20,left:30,bottom:20,right:30},tick_amount:6,chart_class:"d3-range-slider"})}}],[{key:"handleBrush",value:function(e,t){var a=e.brush.extent()[0],r=parseInt(e.min_handle.attr("cx")),n=parseInt(e.max_handle.attr("cx"));if(!r&&!n)return!1;d3.event.sourceEvent&&(a=e.x_scale.invert(d3.mouse(t)[0]),e.brush.extent([a,a]));var i=e.x_scale(a);if(n>i&&i>r){if(Math.abs(i-r)<Math.abs(i-n)){if(e.min_handle.attr("cx",i),r=i,d3.event.sourceEvent&&e.delta.min){var s=e.getDelta("min",a,e.x_scale.invert(n));s&&e.max_handle.attr("cx",e.x_scale(s))}}else if(e.max_handle.attr("cx",i),n=i,d3.event.sourceEvent&&e.delta.min){var s=e.getDelta("min",a,e.x_scale.invert(r));s&&e.min_handle.attr("cx",e.x_scale(s))}}else if(i>=n){if(e.max_handle.attr("cx",i),n=i,d3.event.sourceEvent&&e.delta.max){var s=e.getDelta("max",a,e.x_scale.invert(r));s&&e.min_handle.attr("cx",e.x_scale(s))}}else if(r>=i&&(e.min_handle.attr("cx",i),r=i,d3.event.sourceEvent&&e.delta.max)){var o=e.getDelta("max",a,e.x_scale.invert(n));o&&e.max_handle.attr("cx",e.x_scale(o))}d3.event.sourceEvent&&e.onRangeUpdated&&e.onRangeUpdated(e.x_scale.invert(r),e.x_scale.invert(n))}}]),RangeSlider}(_base2["default"]);exports["default"]=RangeSlider},function(e,t){}]);
//# sourceMappingURL=bundle.min.js.map