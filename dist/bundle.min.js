!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=(r(n),a(3)),s=(r(i),a(4)),l=(r(s),a(5)),o=(r(l),a(6)),c=(r(o),a(7)),u=(r(c),a(8));r(u);a(9)},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),c=r(o),u=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"defineAxes",value:function(){var e=this;e.y_axis=d3.svg.axis().orient("left").outerTickSize(0),e.y_scale=d3.scale.ordinal(),e.svg.append("g").attr("class","d3-chart-range d3-chart-axis"),e.x_scale=d3.scale.ordinal().domain(d3.range(31).map(function(e){return e+1})).rangeRoundBands([0,e.width],e.grid_padding,0),e.x_axis=d3.svg.axis().scale(e.x_scale).orient("top").outerTickSize(0),e.svg.append("g").attr("class","d3-chart-domain d3-chart-axis")}},{key:"afterAxes",value:function(){var e=this;e.grid_unit_size=e.width/31-e.grid_padding*e.width/30,e.display_date_format&&(e.displayDate=d3.time.format(e.display_date_format)),!e.toDate&&e.parse_date_format?(e.parseDate=d3.time.format(e.parse_date_format),e.toDate=function(t){e.parseDate(t[e.date_attr])}):e.toDate||(e.toDate=function(t){return t[e.date_attr]}),e.monthFormat=d3.time.format(e.display_date_format),e.toMonthString=function(t){return e.monthFormat(e.toDate(t))}}},{key:"serializeData",value:function(e){var t=this;if(e.css_class=e.css_class||t.toClass?t.toClass(e):"",t.rangeValue=t.range_attr?function(e){return e[t.range_attr]}:t.rangeValue,e.months=[],void 0!==e.min_range&&void 0!==e.max_range)e.range={min:e.min_range,max:e.max_range},e.values.forEach(function(a){var r=t.toDate(a),n=t.monthFormat(r);e.months.indexOf(n)<0&&e.months.push(n)});else{var a=1/0,r=-(1/0);e.values.forEach(function(n){var i=t.toDate(n),s=t.monthFormat(i),l=t.rangeValue(n);a=Math.min(a,l),r=Math.max(r,l),e.months.indexOf(s)<0&&e.months.push(s)}),t.min_range_zero&&(a=Math.min(a,0)),e.range={min:a,max:r}}return e.range.diff=e.range.max-e.range.min,e.months=e.months.sort(function(e,a){var r=t.monthFormat.parse(e),n=t.monthFormat.parse(a);return r.getTime()-n.getTime()}),e}},{key:"drawLegend",value:function(e){var t=this,a=[t.color_max,t.color_min];t.gridSize=Math.floor(t.outer_width/31),t.legendElementWidth=3.5*t.gridSize;var r=t.svg.append("g").attr("class","color-legend"),n=t.svg.append("g").attr("class","legend").selectAll().data([e.range.min,e.range.max],function(e){return e});n.enter().append("text").attr("class","legend-description");var i=r.append("defs").append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("spreadMethod","pad");i.append("stop").attr("offset","0%").attr("stop-color",a[1]).attr("stop-opacity",1),i.append("stop").attr("offset","100%").attr("stop-color",a[0]).attr("stop-opacity",1),r.append("rect").attr("x",0).attr("y",t.gridSize*e.months.length-40).attr("width",120).attr("height",30).style("fill","url(#gradient)"),n.text(function(e){return Math.round(e)}).attr("x",function(e,a){return t.legendElementWidth*a}).attr("y",t.gridSize*e.months.length+5),n.exit().remove()}},{key:"drawData",value:function(e){var t=this;e=t.serializeData(e),t.legend&&t.drawLegend(e);var a=t.grid_unit_size*(1+t.grid_padding)*e.months.length;t.y_scale.rangeRoundBands([0,a],t.grid_padding,0),t.y_scale.domain(e.months),t.y_axis.scale(t.y_scale),t.svg.select(".d3-chart-range").call(t.y_axis),t.svg.select(".d3-chart-domain").call(t.x_axis);var r=t.svg.selectAll(".d3-chart-grid-unit").data(e.values);t.applyData(e,r.enter().append("rect")),t.applyData(e,r.transition()),r.exit().remove()}},{key:"applyData",value:function(e,t){var a=this,r="d3-chart-grid-unit "+e.css_class;t.attr("class",function(e){return r}).attr("y",function(e){var t=a.y_scale(a.toMonthString(e)),r=a.y_scale.rangeBand()/2-a.grid_unit_size/2;return t+r}).attr("height",a.grid_unit_size).attr("x",function(e){return a.x_scale(a.toDate(e).getDate())}).attr("width",function(e){return a.grid_unit_size}).attr("fill",a.color_max).attr("opacity",function(t){return a.applyOpacity(a.rangeValue(t),e.range)})}},{key:"applyOpacity",value:function(e,t){return Math.max(0,Math.min(1,1-(t.max-(e-t.min))/t.diff))}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},c["default"].DEFAULTS),{outer_width:800,outer_height:360,margin:{top:30,left:150,bottom:30,right:0},grid_padding:.05,display_date_format:"%B %Y",date_attr:"date",range_attr:"value",min_range_zero:!1,color_max:"#000",color_min:"#fff",legend:!0,chart_class:"d3-calendar-grid"})}}]),t}(c["default"]);t["default"]=u},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n={outer_width:500,outer_height:300,margin:{top:0,left:70,bottom:50,right:20},domain_ticks:10,range_ticks:8,container:"container",time_series:!1,range_label:void 0,domain_attr:void 0,range_attr:void 0,titleize:function(e,t){var a=t?t.name:e.title;if(!a)return"";for(var r=a.split(" "),n=[],i=0;i<r.length;++i)n.push(r[i].charAt(0).toUpperCase()+r[i].toLowerCase().slice(1));return n.join(" ")},toClass:function(e){return e.css_class?e.css_class.toLowerCase().replace(/\s+/g,"-"):""}},i=function(){function e(t){a(this,e);var r=this;Object.assign(r,r.chart_options,t),r.height=r.outer_height-r.margin.top-r.margin.bottom,r.width=r.outer_width-r.margin.left-r.margin.right,r.svg=d3.select(r.container).append("svg").attr("width",r.outer_width).attr("height",r.outer_height).attr("class",r.chart_class||"").append("g").attr("transform","translate("+r.margin.left+","+r.margin.top+")").attr("class","d3-object-container"),r.defineAxes(),r.afterAxes&&r.afterAxes()}return r(e,[{key:"drawOne",value:function(e,t,a,r){var n=this,i=void 0;return r=r||n.svg,i=r.selectAll(e).data([0]),i.exit().remove(),[i.enter().append(t),i].forEach(function(e){a(e)}),i}}]),e}();i.DEFAULTS=n,t["default"]=i},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_base=__webpack_require__(2),_base2=_interopRequireDefault(_base),RangeSlider=function(_Chart){function RangeSlider(){return _classCallCheck(this,RangeSlider),_possibleConstructorReturn(this,Object.getPrototypeOf(RangeSlider).apply(this,arguments))}return _inherits(RangeSlider,_Chart),_createClass(RangeSlider,[{key:"defineAxes",value:function(){var e=this;e.date_range?(e.x_scale=d3.time.scale(),e.x_scale.range([0,e.width]).clamp(!0)):(e.x_scale=d3.scale.linear(),e.x_scale.range([0,e.width]).clamp(!0)),e.x_axis=e.x_axis||d3.svg.axis(),e.x_axis.scale(e.x_scale).orient("bottom").tickSize(1).ticks(e.tick_amount).outerTickSize(1).tickPadding(12),e.drawOne(".d3-chart-domain.d3-slider-axis","g",function(t){t.attr("class","d3-chart-domain d3-slider-axis"),t.attr("transform","translate(0,"+e.height/2+")")})}},{key:"afterAxes",value:function(){var e=this;e.slider=e.drawOne(".d3-chart-slider","g",function(e){e.attr("class","d3-chart-slider")}),e.min_handle=e.drawOne(".d3-chart-slider .d3-chart-min-handle","circle",function(t){t.attr("class","d3-chart-min-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",e.handle_r)},e.slider),e.max_handle=e.drawOne(".d3-chart-slider .d3-chart-max-handle","circle",function(t){t.attr("class","d3-chart-max-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",e.handle_r)},e.slider),e.brush=d3.svg.brush(),e.brush.x(e.x_scale),e.slider.call(e.brush),e.slider.call(e.brush).selectAll(".extent,.resize").remove()}},{key:"drawData",value:function drawData(data){var range_slider=this;range_slider.x_scale.domain([data.abs_min,data.abs_max]),range_slider.svg.select(".d3-chart-domain").call(range_slider.x_axis),range_slider.min_handle.attr("cx",range_slider.x_scale(data.current_min)),range_slider.max_handle.attr("cx",range_slider.x_scale(data.current_max)),range_slider.brush.extent([data.current_min,data.current_min]).on("brush",function(){RangeSlider.handleBrush(range_slider,eval("this"))}),range_slider.slider.call(range_slider.brush.event).transition().duration(750).call(range_slider.brush.extent([data.current_min,data.current_min])).call(range_slider.brush.event),range_slider.data=data}},{key:"getDelta",value:function(e,t,a){var r=this;if("max"===e){if(r.date_range){if(Math.abs(t.getTime()-a.getTime())>r.delta.max)return t>a?new Date(t.getTime()-r.delta.max):new Date(t.getTime()+r.delta.max)}else if(Math.abs(t-a)>r.delta.max)return t>a?t-r.delta.max:t+r.delta.max;return!1}if("min"===e){if(r.date_range){if(Math.abs(t.getTime()-a.getTime())<=r.delta.min)return a>t?new Date(t.getTime()+r.delta.min):new Date(t.getTime()-r.delta.min)}else if(Math.abs(t-a)<=r.delta.min)return a>t?t+r.delta.min:t-r.delta.min;return!1}}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},_base2["default"].DEFAULTS),{outer_width:600,outer_height:100,margin:{top:20,left:30,bottom:20,right:30},tick_amount:6,chart_class:"d3-range-slider",handle_r:9})}}],[{key:"handleBrush",value:function(e,t){var a=e.brush.extent()[0],r=parseInt(e.min_handle.attr("cx")),n=parseInt(e.max_handle.attr("cx"));if(!r&&!n)return!1;d3.event.sourceEvent&&(a=e.x_scale.invert(d3.mouse(t)[0]),e.brush.extent([a,a]));var i=e.x_scale(a);if(n>i&&i>r){if(Math.abs(i-r)<Math.abs(i-n)){if(e.min_handle.attr("cx",i),r=i,d3.event.sourceEvent&&e.delta.min){var s=e.getDelta("min",a,e.x_scale.invert(n));s&&e.max_handle.attr("cx",e.x_scale(s))}}else if(e.max_handle.attr("cx",i),n=i,d3.event.sourceEvent&&e.delta.min){var s=e.getDelta("min",a,e.x_scale.invert(r));s&&e.min_handle.attr("cx",e.x_scale(s))}}else if(i>=n){if(e.max_handle.attr("cx",i),n=i,d3.event.sourceEvent&&e.delta.max){var s=e.getDelta("max",a,e.x_scale.invert(r));s&&e.min_handle.attr("cx",e.x_scale(s))}}else if(r>=i&&(e.min_handle.attr("cx",i),r=i,d3.event.sourceEvent&&e.delta.max)){var l=e.getDelta("max",a,e.x_scale.invert(n));l&&e.max_handle.attr("cx",e.x_scale(l))}d3.event.sourceEvent&&e.onRangeUpdated&&e.onRangeUpdated(e.x_scale.invert(r),e.x_scale.invert(n))}}]),RangeSlider}(_base2["default"]);exports["default"]=RangeSlider},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_base=__webpack_require__(2),_base2=_interopRequireDefault(_base),SnapSlider=function(_Chart){function SnapSlider(){return _classCallCheck(this,SnapSlider),_possibleConstructorReturn(this,Object.getPrototypeOf(SnapSlider).apply(this,arguments))}return _inherits(SnapSlider,_Chart),_createClass(SnapSlider,[{key:"defineAxes",value:function(){var e=this;e.ensureTickHelpers(),e.date_range?e.x_scale=d3.time.scale().range([0,e.width]).clamp(!0):e.x_scale=d3.scale.linear().range([0,e.width]).clamp(!0),e.x_axis=d3.svg.axis().scale(e.x_scale).orient("bottom").tickSize(1).tickValues(e.tick_values).tickFormat(function(t){return e.tickLabel(t)}).outerTickSize(1).tickPadding(12),e.drawOne(".d3-chart-domain.d3-slider-axis","g",function(t){t.attr("class","d3-chart-domain d3-slider-axis").attr("transform","translate(0,"+e.height/2+")")})}},{key:"ensureTickHelpers",value:function(){var e=this;void 0===e.tick_values&&(e.tick_values=Object.keys(e.tick_labels).map(function(e){return parseInt(e)})),void 0===e.tickLabel&&void 0===e.tick_labels?e.tickLabel=function(e){return e}:void 0===e.tickLabel&&(e.tickLabel=function(t){return e.tick_labels[t]})}},{key:"afterAxes",value:function(){var e=this;e.slider=e.drawOne(".d3-chart-slider","g",function(e){e.attr("class","d3-chart-slider")}),e.handle=e.drawOne(".d3-chart-handle","circle",function(t){t.attr("class","d3-chart-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",e.handle_r)},e.slider),e.brush=d3.svg.brush().x(e.x_scale),e.slider.call(e.brush),e.slider.call(e.brush).selectAll(".extent,.resize").remove(),e.axis_click_handle&&e.svg.select(".background").attr("transform","translate(0,"+(e.height/2-e.handle_r)+")").attr("height",2*e.handle_r)}},{key:"drawData",value:function drawData(data){var snap_slider=this;snap_slider.x_scale.domain([data.abs_min,data.abs_max]),snap_slider.svg.select(".d3-chart-domain").call(snap_slider.x_axis),snap_slider.handle.attr("cx",snap_slider.x_scale(data.current_value)),snap_slider.brush.extent([data.current_value,data.current_value]).on("brush",function(){SnapSlider.handleBrush(snap_slider,eval("this"))}),snap_slider.slider.call(snap_slider.brush.event).transition().duration(750).call(snap_slider.brush.extent([data.current_value,data.current_value])).call(snap_slider.brush.event),d3.select(snap_slider.container).selectAll(".tick").on("click",function(e){var t=snap_slider.x_scale(e);snap_slider.handle.transition().attr("cx",t),snap_slider.onSnap&&snap_slider.onSnap(e)}),snap_slider.current_value=data.current_value,snap_slider.data=data}},{key:"setValue",value:function(e,t){t=Object.assign({exec_callback:!0},t||{});var a=this;e=a.findNearestTickValue(e),a.data.current_value=e,a.current_value=e;var r=a.x_scale(e);a.handle.attr("cx",r),a.onSnap&&t.exec_callback&&a.onSnap(e)}},{key:"findNearestTickValue",value:function(e){for(var t=this,a=0;a<t.tick_values.length;a++){var r=t.tick_values[a],n=t.tick_values[a+1];if(void 0===n)return r;if(n>e){return Math.abs(e-r)<Math.abs(e-n)?r:n}}}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},_base2["default"].DEFAULTS),{outer_width:600,outer_height:100,margin:{top:20,left:30,bottom:20,right:30},tick_amount:6,chart_class:"d3-snap-slider",snap_debounce:150,handle_r:9})}}],[{key:"handleBrush",value:function(e,t){var a=e.brush.extent()[0],r=parseInt(e.handle.attr("cx")),n=d3.event.sourceEvent;if(null===r||!n)return!1;n&&(a=e.x_scale.invert(d3.mouse(t)[0]),e.brush.extent([a,a]));var i=e.x_scale(a);e.handle.attr("cx",i),e.$handle_brush&&clearTimeout(e.$handle_brush),e.$handle_brush=setTimeout(function(){var t=e.findNearestTickValue(a),r=e.x_scale(t);e.handle.transition().attr("cx",r),e.current_value=t,n&&e.onSnap&&e.onSnap(t)},e.snap_debounce)}}]),SnapSlider}(_base2["default"]);exports["default"]=SnapSlider},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_base=__webpack_require__(2),_base2=_interopRequireDefault(_base),SimpleSlider=function(_Chart){function SimpleSlider(){return _classCallCheck(this,SimpleSlider),_possibleConstructorReturn(this,Object.getPrototypeOf(SimpleSlider).apply(this,arguments))}return _inherits(SimpleSlider,_Chart),_createClass(SimpleSlider,[{key:"defineAxes",value:function(){var e=this;e.ensureTickHelpers(),e.date_range?e.x_scale=d3.time.scale().range([0,e.width]).clamp(!0):e.x_scale=d3.scale.linear().range([0,e.width]).clamp(!0),e.x_axis=d3.svg.axis().scale(e.x_scale).orient("bottom").tickSize(1).tickValues(e.tick_values).tickFormat(function(t){return e.tickLabel(t)}).outerTickSize(1).tickPadding(12),e.drawOne(".d3-chart-domain.d3-slider-axis","g",function(t){t.attr("class","d3-chart-domain d3-slider-axis").attr("transform","translate(0,"+e.height/2+")")})}},{key:"ensureTickHelpers",value:function(){var e=this;void 0===e.tick_values&&(e.tick_values=Object.keys(e.tick_labels).map(function(e){return parseInt(e)})),void 0===e.tickLabel&&void 0===e.tick_labels?e.tickLabel=function(e){return e}:void 0===e.tickLabel&&(e.tickLabel=function(t){return e.tick_labels[t]})}},{key:"afterAxes",value:function(){var e=this;e.slider=e.drawOne(".d3-chart-slider","g",function(e){e.attr("class","d3-chart-slider")}),e.handle=e.drawOne(".d3-chart-handle","circle",function(t){t.attr("class","d3-chart-handle").attr("transform","translate(0,"+e.height/2+")").attr("r",e.handle_r)},e.slider),e.brush=d3.svg.brush().x(e.x_scale),e.slider.call(e.brush),e.slider.call(e.brush).selectAll(".extent,.resize").remove(),e.axis_click_handle&&e.svg.select(".background").attr("transform","translate(0,"+(e.height/2-e.handle_r)+")").attr("height",2*e.handle_r)}},{key:"drawData",value:function drawData(data){var simple_slider=this;simple_slider.x_scale.domain([data.abs_min,data.abs_max]),simple_slider.svg.select(".d3-chart-domain").call(simple_slider.x_axis),simple_slider.handle.attr("cx",simple_slider.x_scale(data.current_value)),simple_slider.brush.extent([data.current_value,data.current_value]).on("brush",function(){SimpleSlider.handleBrush(simple_slider,eval("this"))}),simple_slider.slider.call(simple_slider.brush.event).transition().duration(750).call(simple_slider.brush.extent([data.current_value,data.current_value])).call(simple_slider.brush.event),d3.select(simple_slider.container).selectAll(".tick").on("click",function(e){var t=simple_slider.x_scale(e);simple_slider.handle.transition().attr("cx",t),simple_slider.onChange&&simple_slider.onChange(e)}),simple_slider.data=data,simple_slider.current_value=data.current_value}},{key:"setValue",value:function(e,t){t=Object.assign({exec_callback:!0},t||{});var a=this;a.data.current_value=e,a.current_value=e;var r=a.x_scale(e);a.handle.attr("cx",r),a.onChange&&t.exec_callback&&a.onChange(e)}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},_base2["default"].DEFAULTS),{outer_width:600,outer_height:100,margin:{top:20,left:30,bottom:20,right:30},tick_amount:6,callback_debounce:200,chart_class:"d3-simple-slider",handle_r:9})}}],[{key:"handleBrush",value:function(e,t){var a=e.brush.extent()[0],r=parseInt(e.handle.attr("cx")),n=d3.event.sourceEvent;if(null===r||!n)return!1;n&&(a=e.x_scale.invert(d3.mouse(t)[0]),e.brush.extent([a,a]));var i=e.x_scale(a);return e.handle.attr("cx",i),e.onChange&&n?(e.$handle_brush&&clearTimeout(e.$handle_brush),void(e.$handle_brush=setTimeout(function(){e.onChange(a)},e.callback_debounce))):!1}}]),SimpleSlider}(_base2["default"]);exports["default"]=SimpleSlider},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),c=r(o),u=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"defineAxes",value:function(){var e=this;e.y_axis=d3.svg.axis().orient("left").ticks(e.y_ticks).outerTickSize(0).tickFormat(e.yTickFormat),e.y_scale=d3.scale.linear(),e.drawOne(".d3-chart-range.d3-chart-axis","g",function(e){e.attr("class","d3-chart-range d3-chart-axis")}),e.x_scale=d3.scale.ordinal(),e.x_axis=d3.svg.axis().orient("bottom").outerTickSize(0).tickFormat(e.xTickFormat),e.drawOne(".d3-chart-domain.d3-chart-axis","g",function(t){t.attr("class","d3-chart-domain d3-chart-axis").attr("transform","translate(0,"+e.height+")")}),e.fnColor=e.fnColor||d3.scale.category20()}},{key:"drawData",value:function(e){var t=this;t.x_scale.domain(e.categories).rangeRoundBands([0,t.width],.1,0),t.x_axis.scale(t.x_scale);var a=t.dataExtent(e);return t.y_scale.domain(a).range([t.height,0]),t.y_axis.scale(t.y_scale),t.svg.select(".d3-chart-range").call(t.y_axis),t.svg.select(".d3-chart-domain").call(t.x_axis),e.series.forEach(function(a){var r=t.fnSeriesClass(a),n=t.svg.selectAll("."+r).data(a.values);t.applyData(a,n,e.categories),t.applyData(a,n.enter().append("rect"),e.categories),n.exit().remove()}),t.data=e,t}},{key:"dataExtent",value:function(e){for(var t=0,a=0,r=0;r<e.series.length;r++){var n=e.series[r],i=!0,s=!1,l=void 0;try{for(var o,c=n.values[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;t=Math.min(t,u),a=Math.max(a,u)}}catch(d){s=!0,l=d}finally{try{!i&&c["return"]&&c["return"]()}finally{if(s)throw l}}}return[t,a]}},{key:"applyData",value:function(e,t,a){var r=this,n="d3-overlap-bar "+r.fnSeriesClass(e);t.attr("class",function(e,t){var i=r.fnCategoryClass(a[t]);return[n,i].join(" ")}).attr("y",function(e){return r.y_scale(e)}).attr("height",function(e){return r.height-r.y_scale(e)}).attr("x",function(e,t){return r.x_scale(a[t])}).attr("width",function(e){return r.x_scale.rangeBand()})}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},c["default"].DEFAULTS),{outer_width:600,outer_height:400,margin:{top:20,left:30,bottom:20,right:30},y_ticks:7,chart_class:"d3-chart-slider",fnSeriesClass:function(e){return e.name.replace(/\s+/g,"-").toLowerCase()},fnCategoryClass:function(e){return e.replace(/\s+/g,"-").toLowerCase()},xTickFormat:function(e,t){return e},yTickFormat:function(e,t){return e}})}}]),t}(c["default"]);t["default"]=u},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),c=r(o),u=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"defineAxes",value:function(){var e=this;e.y_axis=d3.svg.axis().orient("left").ticks(e.y_ticks).outerTickSize(0).tickFormat(e.yTickFormat),e.y_scale=d3.scale.linear(),e.drawOne(".d3-chart-range.d3-chart-axis","g",function(e){e.attr("class","d3-chart-range d3-chart-axis")}),e.x_scale=d3.scale.ordinal(),e.x_axis=d3.svg.axis().orient("bottom").outerTickSize(0).tickFormat(e.xTickFormat),e.drawOne(".d3-chart-domain.d3-chart-axis","g",function(t){t.attr("class","d3-chart-domain d3-chart-axis").attr("transform","translate(0,"+e.height+")")}),e.fnColor=e.fnColor||d3.scale.category20(),e.tooltip=d3.select(e.container).append("div").attr("class","stacked-bar-tooltip")}},{key:"drawData",value:function(e){var t=this;t.x_scale.domain(e.map(function(e){return e.name})).rangeRoundBands([0,t.width],.1,0),t.x_axis.scale(t.x_scale),t.extent=t.dataExtent(e),t.y_scale.domain(t.extent).range([t.height,0]),t.y_axis.scale(t.y_scale),t.svg.select(".d3-chart-range").call(t.y_axis),t.svg.select(".d3-chart-domain").call(t.x_axis),e.forEach(function(e,t){var a=0;e.values.map(function(e){e.y0=a,e.y1=a+=e.value})});var a=t.svg.selectAll("g.series").data(e).enter().append("g").attr("class",function(e){return t.fnClassName(e.name)+" series"});t.svg.selectAll("g.series").attr("transform",function(e){return"translate("+t.x_scale(e.name)+",0)"});var r=a.selectAll("rect").data(function(e){return e.values}).enter();r.append("rect"),r.append("text");var n=t.svg.selectAll("g.series").selectAll("rect"),i=t.svg.selectAll("g.series").selectAll("text");return t.applyData(n),t.labels&&t.applyLabels(i),t.hover_tooltips&&t.applyTooltip(a),t.data=e,t}},{key:"dataExtent",value:function(e){for(var t=0,a=0;a<e.length;a++){var r=0,n=!0,i=!1,s=void 0;try{for(var l,o=e[a].values[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value;r+=c.value}}catch(u){i=!0,s=u}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw s}}t=Math.max(t,r)}return[0,t]}},{key:"applyData",value:function(e){var t=this;e.attr("class",function(e){return t.fnClassName(e.title)}).attr("y",function(e){return t.y_scale(e.y1)}).attr("height",function(e){return t.y_scale(e.y0)-t.y_scale(e.y1)}).style("fill",t.rect_color).style("stroke",t.divider_color).attr("width",t.x_scale.rangeBand())}},{key:"applyLabels",value:function(e){var t=this;e.text(function(e){return e.title}).attr("y",function(e){return t.y_scale(e.y1)+(t.y_scale(e.y0)-t.y_scale(e.y1))/1.5}).attr("x",t.x_scale.rangeBand()/2).attr("text-anchor","middle").style("font-size",function(e){return 6*e.title.length>=t.x_scale.rangeBand()+5||100*e.value/t.extent[1]<7.5?"0px":t.x_scale.rangeBand()<90?5.5*e.title.length>90?"0px":"10px":"12px"}).style("fill","#ffffff")}},{key:"applyTooltip",value:function(e){var t=this;e.on("mousemove",function(e){t.tooltip.style("left",d3.event.pageX+15+"px"),t.tooltip.style("top",d3.event.pageY-25+"px"),t.tooltip.style("display","inline-block");var a=document.querySelectorAll(":hover")||document.querySelectorAll(":focus"),r=a[a.length-1].__data__;t.tooltip.html("<b>"+r.title+"</b> <br> "+r.value.toFixed(2)+" tons CO<sub>2</sub>")}),e.on("mouseout",function(){return t.tooltip.style("display","none")})}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},c["default"].DEFAULTS),{outer_width:600,outer_height:400,margin:{top:20,left:30,bottom:20,right:30},y_ticks:7,chart_class:"d3-stacked-bar-chart",fnClassName:function(e){return e.replace(/\s+/g,"-").toLowerCase()},xTickFormat:function(e,t){return e},yTickFormat:function(e,t){return e},divider_color:"#fff",rect_color:"#0d793e",hover_tooltips:!0,
labels:!0})}}]),t}(c["default"]);t["default"]=u},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),c=r(o),u=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"defineAxes",value:function(){}},{key:"drawData",value:function(e){var t=this,a=d3.sum(e.values),r=t.max_r||Math.min(t.width,t.height)/2,n=Math.max(e.comparative_sum,a),i=Math.min(e.comparative_sum,a),s=Math.sqrt(i/n)*r,l=Math.sqrt(Math.pow(Math.abs(r-s),2)/2);return t.values_gte_comparative=a>=e.comparative_sum,t.values_gte_comparative?(t.drawPie(e,r,0),t.drawComparativeArc(s,l)):(t.drawComparativeArc(r,0),t.drawPie(e,s,l)),t.data=e,t}},{key:"drawPie",value:function(e,t,a){var r=this,n=d3.svg.arc().outerRadius(t).innerRadius(0),i=d3.svg.arc().outerRadius(t+r.label_r).innerRadius(t+r.label_r),s=d3.layout.pie().sort(null),l=r.width/2-a,o=r.height/2+a,c=r.svg.selectAll(".d3-value-arc").data(s(e.values));c.exit().remove(),[c.enter().append("g"),c].forEach(function(t){t.attr("class",function(t,a){var n=r.fnCategoryClass(e.categories[a]);return["d3-value-arc",n].join(" ")}).attr("transform","translate("+l+", "+o+")")}),r.svg.selectAll(".d3-value-arc").each(function(t,a){var i=d3.select(this).selectAll("path").data([t]);i.exit().remove(),[i.enter().append("path"),i].forEach(function(t){t.attr("d",n).style("fill",function(t,n){return r.fnColor(e.categories[a])})})}),r.svg.selectAll(".d3-value-arc").each(function(t,a){var r=d3.select(this).selectAll("text").data([t]);r.exit().remove(),[r.enter().append("text"),r].forEach(function(t){t.attr("dy",".35em").text(function(t,r){return e.categories[a]}).attr("transform",function(e,t){var a=this,r=i.centroid(e);return r[0]-=a.getBBox().width/2,"translate("+r+")"})})})}},{key:"drawSlice",value:function(e,t,a,r){}},{key:"drawLabel",value:function(e,t,a,r){}},{key:"drawComparativeArc",value:function(e,t){var a=this,r=a.width/2-t,n=a.height/2+t,i=a.svg.selectAll(".d3-comparative-arc").data([0]);i.exit().remove(),[i.enter().append("circle"),i].forEach(function(t){t.attr("class","d3-comparative-arc").style("stroke","black").style("stroke-width",2).style("fill",function(){return a.values_gte_comparative?"none":a.defecit_fill}).style("stroke-dasharray","5,5").attr("r",e).attr("cx",r).attr("cy",n)})}},{key:"redraw",value:function(e){var t=this;Object.assign(t,e),t.height=t.outer_height-t.margin.top-t.margin.bottom,t.width=t.outer_width-t.margin.left-t.margin.right,d3.select(t.container+" svg").attr("width",t.outer_width).attr("height",t.outer_height).select(".d3-object-container").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.defineAxes(),t.afterAxes&&t.afterAxes(),t.drawData(t.data)}},{key:"chart_options",get:function(){return Object.assign(Object.assign({},c["default"].DEFAULTS),{outer_width:600,outer_height:400,margin:{top:20,left:30,bottom:20,right:30},chart_class:"d3-comparative-pie-chart",fnColor:d3.scale.category20(),fnCategoryClass:function(e){return e.toLowerCase().replace(/\s+/g,"-")},defecit_fill:"lightgrey",label_r:-30,max_r:void 0})}}]),t}(c["default"]);t["default"]=u},function(e,t){}]);
//# sourceMappingURL=bundle.min.js.map